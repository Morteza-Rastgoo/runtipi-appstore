{
  "services": {
    "nca-toolkit": {
      "image": "nca/nca-toolkit:latest",
      "container_name": "nca-toolkit",
      "restart": "unless-stopped",
      "environment": [
        "PUID=${PUID:-1000}",
        "PGID=${PGID:-1000}",
        "TZ=${TZ:-UTC}"
      ],
      "volumes": [
        "${APP_DATA_DIR}/data:/data"
      ],
      "ports": [
        "${APP_PORT}:8000"
      ],
      "networks": ["tipi_main_network"],
      "healthcheck": {
        "test": ["CMD", "curl", "-f", "http://localhost:8000/health"],
        "interval": "30s",
        "timeout": "10s",
        "retries": 3
      },
      "labels": {
        "traefik.enable": "true",
        "traefik.http.routers.nca-toolkit.rule": "Host(`${APP_DOMAIN}`)",
        "traefik.http.routers.nca-toolkit.entrypoints": "websecure",
        "traefik.http.routers.nca-toolkit.tls.certresolver": "myresolver",
        "traefik.http.services.nca-toolkit.loadbalancer.server.port": "8000",
        "runtipi.managed": "true"
      }
    }
  },
  "networks": {
    "tipi_main_network": {
      "external": true
    }
  }
}